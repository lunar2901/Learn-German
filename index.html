<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>German Vocabulary Master</title>
<style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); min-height:100vh; padding:20px; }
    .container { max-width:1400px; margin:0 auto; }
    .header { text-align:center; color:white; margin-bottom:30px; }
    .header h1 { font-size:2.5rem; margin-bottom:10px; text-shadow:2px 2px 4px rgba(0,0,0,0.3); }
    .header p { font-size:1.1rem; opacity:0.9; }
    .stats-banner { background:white; padding:15px; border-radius:10px; margin-bottom:20px; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.2); }
    .stats-banner h2 { color:#667eea; font-size:1.8rem; }
    .main-content { display:grid; grid-template-columns:300px 1fr; gap:20px; margin-bottom:20px; }
    .card { background:white; border-radius:15px; padding:25px; box-shadow:0 10px 30px rgba(0,0,0,0.2); }
    .word-study { grid-column:2/3; }
    .sidebar { position:sticky; top:20px; max-height:calc(100vh - 40px); overflow-y:auto; }
    .word-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding-bottom:15px; border-bottom:3px solid #667eea; }
    .word-title { font-size:2rem; color:#667eea; font-weight:bold; }
    .word-type { background:#667eea; color:white; padding:5px 15px; border-radius:20px; font-size:0.9rem; }
    .section { margin-bottom:25px; }
    .section h3 { color:#764ba2; margin-bottom:10px; font-size:1.3rem; }
    .meaning-item { background:#f8f9ff; padding:15px; border-radius:8px; margin-bottom:10px; border-left:4px solid #667eea; }
    .meaning-item strong { color:#667eea; }
    .example { background:#fff8e1; padding:12px; border-radius:8px; margin:8px 0; font-style:italic; border-left:3px solid #ffa726; }
    .translation { color:#666; margin-top:5px; font-size:0.95rem; }
    .variations { display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }
    .variation-tag { background: linear-gradient(135deg,#667eea,#764ba2); color:white; padding:8px 15px; border-radius:20px; font-size:0.9rem; cursor:pointer; transition:transform 0.2s; }
    .variation-tag:hover { transform:scale(1.05); }
    .filter-section { margin-bottom:20px; }
    .filter-section input, .filter-section select { width:100%; padding:10px; border:2px solid #e0e0e0; border-radius:8px; font-size:1rem; margin-bottom:10px; }
    .filter-section input:focus, .filter-section select:focus { outline:none; border-color:#667eea; }
    .word-list { display:grid; gap:8px; }
    .word-list-item { background:#f8f9ff; padding:12px; border-radius:8px; cursor:pointer; transition:all 0.3s; border-left:4px solid #667eea; }
    .word-list-item:hover { transform:translateX(5px); box-shadow:0 3px 10px rgba(0,0,0,0.1); }
    .word-list-item.active { background: linear-gradient(135deg,#667eea,#764ba2); color:white; }
    .word-list-item .word-name { font-weight:bold; font-size:1.1rem; }
    .word-list-item .word-info { font-size:0.85rem; margin-top:3px; opacity:0.8; }
    .nav-tabs { display:flex; gap:10px; margin-bottom:20px; }
    .tab { padding:12px 25px; background:white; border:none; border-radius:10px; cursor:pointer; font-weight:600; font-size:1rem; transition:all 0.3s; box-shadow:0 3px 10px rgba(0,0,0,0.1); }
    .tab.active { background: linear-gradient(135deg,#667eea,#764ba2); color:white; transform:translateY(-2px); box-shadow:0 5px 15px rgba(102,126,234,0.4); }
    .exercise-section { grid-column:1/-1; }
    .exercise-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .score { font-size:1.3rem; color:#667eea; font-weight:bold; }
    .question-card { background:#f8f9ff; padding:25px; border-radius:10px; margin-bottom:20px; }
    .question-text { font-size:1.3rem; margin-bottom:20px; color:#333; font-weight:500; }
    .options { display:grid; gap:12px; }
    .option { background:white; border:2px solid #e0e0e0; padding:18px; border-radius:10px; cursor:pointer; transition:all 0.3s; display:flex; align-items:center; font-size:1.05rem; }
    .option:hover { border-color:#667eea; transform:translateX(8px); box-shadow:0 3px 15px rgba(102,126,234,0.2); }
    .option.selected { border-color:#667eea; background:#f0f4ff; }
    .option.correct { border-color:#4caf50; background:#e8f5e9; }
    .option.incorrect { border-color:#f44336; background:#ffebee; }
    .option-letter { display:inline-flex; align-items:center; justify-content:center; width:35px; height:35px; background:#667eea; color:white; border-radius:50%; margin-right:15px; font-weight:bold; font-size:1.1rem; }
    .button-group { display:flex; gap:10px; margin-top:20px; }
    .btn { padding:14px 35px; border:none; border-radius:10px; font-size:1.05rem; cursor:pointer; transition:all 0.3s; font-weight:bold; }
    .btn-primary { background: linear-gradient(135deg,#667eea,#764ba2); color:white; }
    .btn-primary:hover { transform:translateY(-2px); box-shadow:0 8px 20px rgba(102,126,234,0.4); }
    .btn-secondary { background:#e0e0e0; color:#333; }
    .btn-secondary:hover { background:#d0d0d0; }
    .feedback { padding:20px; border-radius:10px; margin-top:20px; font-weight:500; font-size:1.05rem; }
    .feedback.correct { background:#e8f5e9; color:#2e7d32; border-left:5px solid #4caf50; }
    .feedback.incorrect { background:#ffebee; color:#c62828; border-left:5px solid #f44336; }
    .progress-bar { width:100%; height:10px; background:#e0e0e0; border-radius:5px; overflow:hidden; margin-bottom:25px; }
    .progress-fill { height:100%; background:linear-gradient(90deg,#4caf50,#8bc34a); transition:width 0.5s ease; }
    .stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:15px; margin-top:20px; }
    .stat-box { background:#f8f9ff; padding:20px; border-radius:10px; text-align:center; border-left:4px solid #667eea; }
    .stat-number { font-size:2.5rem; font-weight:bold; color:#667eea; }
    .stat-label { color:#666; font-size:0.95rem; margin-top:5px; }
    .loading { text-align:center; padding:50px; font-size:1.3rem; color:#667eea; }
    .hidden { display:none; }
    .correction-input { width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:10px; font-size:1.1rem; margin-top:15px; }
    .correction-input:focus { outline:none; border-color:#667eea; }
    @media(max-width:768px){
        .main-content{ display:block; }
        .sidebar, .word-study{ width:100%; margin-bottom:20px; max-height:none; overflow:visible; }
        .word-study{ display:none; }
        .word-study.active{ display:block; }
        #backToListBtn{ display:inline-block; margin-bottom:15px; }
    }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üá©üá™ German Vocabulary Master</h1>
        <p>Master 1000+ German words with detailed explanations and interactive exercises</p>
    </div>

    <div class="stats-banner">
        <h2>üìö 1000 Base Words Database Loaded!</h2>
        <p>Comprehensive vocabulary with detailed meanings, usage examples, and exercises</p>
    </div>

    <div class="nav-tabs">
        <button class="tab active" onclick="switchTab('study')">üìö Study</button>
        <button class="tab" onclick="switchTab('exercises')">‚úèÔ∏è Exercises</button>
        <button class="tab" onclick="switchTab('progress')">üìä Progress</button>
    </div>

    <!-- Study Tab -->
    <div id="studyTab" class="main-content">
        <div class="card sidebar" id="wordListContainer">
            <h3 style="color:#667eea;">üìñ Vocabulary List</h3>
            <div class="filter-section">
                <input type="text" id="searchInput" placeholder="üîç Search words..." onkeyup="filterWords()">
                <select id="categoryFilter" onchange="filterWords()">
                    <option value="all">All Categories</option>
                    <option value="Verb">Verbs</option>
                    <option value="Noun">Nouns</option>
                    <option value="Adjective">Adjectives</option>
                    <option value="Adverb">Adverbs</option>
                    <option value="Number">Numbers</option>
                </select>
            </div>
            <div class="word-list" id="wordList"></div>
        </div>

        <div class="card word-study" id="wordDetailContainer">
            <button class="btn btn-secondary" id="backToListBtn" onclick="showWordList()">‚¨Ö Back to List</button>
            <h1 id="currentWordTitle"></h1>
            <div id="wordContent"></div>
        </div>
    </div>

    <!-- Exercises Tab -->
    <div id="exercisesTab" class="main-content hidden">
        <div class="card exercise-section">
            <div class="exercise-header">
                <h2>üéØ Practice Exercises</h2>
                <div class="score">Score: <span id="score">0</span>/<span id="total">0</span></div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width:0%"></div>
            </div>
            <div id="exerciseContent"></div>
            <div class="button-group">
                <button class="btn btn-primary" id="checkBtn" onclick="checkAnswer()">Check Answer</button>
                <button class="btn btn-secondary" id="nextBtn" onclick="nextQuestion()" style="display:none;">Next Question</button>
                <button class="btn btn-secondary" onclick="resetExercise()">New Exercise Set</button>
            </div>
            <div id="feedback"></div>
        </div>
    </div>

    <!-- Progress Tab -->
    <div id="progressTab" class="main-content hidden">
        <div class="card" style="grid-column:1/-1;">
            <h2 style="color:#667eea;margin-bottom:20px;">üìä Your Learning Progress</h2>
            <div class="stats">
                <div class="stat-box"><div class="stat-number" id="wordsLearned">0</div><div class="stat-label">Words Studied</div></div>
                <div class="stat-box"><div class="stat-number" id="totalExercises">0</div><div class="stat-label">Exercises Completed</div></div>
                <div class="stat-box"><div class="stat-number" id="accuracy">0%</div><div class="stat-label">Overall Accuracy</div></div>
                <div class="stat-box"><div class="stat-number" id="totalWords">1000</div><div class="stat-label">Total Words Available</div></div>
            </div>
            <h3 style="color:#764ba2;margin-top:40px;margin-bottom:20px;">Recent Activity</h3>
            <div id="activityLog"></div>
        </div>
    </div>
</div>

<script>
let vocabularyData = [], filteredWords = [], currentWordIndex = 0;
let exercises=[], currentExerciseIndex=0, score=0, totalQuestions=0;
let selectedOption=null, stats={wordsStudied:new Set(), exercisesCompleted:0, correctAnswers:0, totalAnswers:0, activityLog:[]};

// Load JSON database
async function loadVocabulary(){
    try{
        const res = await fetch('german-vocab-1000.json');
        vocabularyData = await res.json();
        filteredWords = vocabularyData;
        loadStats();
        updateWordList();
    } catch(e){
        alert('Error loading vocabulary database');
        console.error(e);
    }
}

function loadStats(){
    const saved = localStorage.getItem('germanVocabStats');
    if(saved){
        const parsed=JSON.parse(saved);
        stats.wordsStudied=new Set(parsed.wordsStudied||[]);
        stats.exercisesCompleted=parsed.exercisesCompleted||0;
        stats.correctAnswers=parsed.correctAnswers||0;
        stats.totalAnswers=parsed.totalAnswers||0;
        stats.activityLog=parsed.activityLog||[];
    }
}

function saveStats(){
    const toSave={
        wordsStudied:Array.from(stats.wordsStudied),
        exercisesCompleted:stats.exercisesCompleted,
        correctAnswers:stats.correctAnswers,
        totalAnswers:stats.totalAnswers,
        activityLog:stats.activityLog.slice(0,50)
    };
    localStorage.setItem('germanVocabStats',JSON.stringify(toSave));
}

function updateWordList(){
    const wordListHTML = filteredWords.map((word,index)=>`
        <div class="word-list-item ${index===currentWordIndex?'active':''}" onclick="displayWord(${index})">
            <div class="word-name">${word.word}</div>
            <div class="word-info">${word.type} ‚Ä¢ ${word.meanings[0].definition}</div>
        </div>
    `).join('');
    document.getElementById('wordList').innerHTML = wordListHTML || '<p style="padding:20px;text-align:center;color:#666;">No words found</p>';
}

function filterWords(){
    const searchTerm=document.getElementById('searchInput').value.toLowerCase();
    const category=document.getElementById('categoryFilter').value;
    filteredWords=vocabularyData.filter(word=>{
        const matchesSearch = word.word.toLowerCase().includes(searchTerm) || word.meanings[0].definition.toLowerCase().includes(searchTerm);
        const matchesCategory = category==='all'||word.category===category;
        return matchesSearch && matchesCategory;
    });
    currentWordIndex=0;
    updateWordList();
}

function renderWordDetails(word){
    let html='';
    if(word.conjugation) html+=`<div class="section"><h3>üìù Conjugation</h3><div class="meaning-item"><strong>${word.conjugation}</strong></div></div>`;
    if(word.article) html+=`<div class="section"><h3>üìå Article & Plural</h3><div class="meaning-item"><strong>Article:</strong>${word.article}<br><strong>Plural:</strong>${word.plural}</div></div>`;
    html+=`<div class="section"><h3>üí° Meaning & Usage</h3>`;
    html+=word.meanings.map(m=>`
        <div class="meaning-item">
            <strong>${m.definition}</strong>
            <p style="margin-top:8px;color:#666;">${m.usage}</p>
            ${(m.examples||[]).map(ex=>`<div class="example"><div><strong>üá©üá™</strong> ${ex.de}</div><div class="translation"><strong>üá¨üáß</strong> ${ex.en}</div></div>`).join('')}
        </div>`).join('');
    html+='</div>';
    if(word.variations?.length) html+=`<div class="section"><h3>üîÑ Variations & Related Forms</h3>${word.variations.map(v=>`<span class="variation-tag" onclick="filterByVariation('${v}')">${v}</span>`).join('')}</div>`;
    return html;
}

function displayWord(index){
    if(!filteredWords.length) return;
    const word=filteredWords[index];
    currentWordIndex=index;
    document.title=`German Vocabulary - ${word.word}`;
    document.getElementById('currentWordTitle').textContent=word.word;
    document.getElementById('wordContent').innerHTML=renderWordDetails(word);
    document.getElementById('wordListContainer').classList.add('hidden');
    document.getElementById('wordDetailContainer').classList.remove('hidden');
    stats.wordsStudied.add(word.word);
    saveStats();
    updateWordList();
}

function showWordList(){
    document.getElementById('wordDetailContainer').classList.add('hidden');
    document.getElementById('wordListContainer').classList.remove('hidden');
    document.title='German Vocabulary Master';
}

function filterByVariation(variation){
    document.getElementById('searchInput').value=variation;
    filterWords();
    displayWord(0);
}

// Tab switching
function switchTab(tab){
    document.getElementById('studyTab').classList.add('hidden');
    document.getElementById('exercisesTab').classList.add('hidden');
    document.getElementById('progressTab').classList.add('hidden');
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelector(`.tab[onclick="switchTab('${tab}')"]`).classList.add('active');
    document.getElementById(tab+'Tab').classList.remove('hidden');
    if(tab==='progress') loadProgress();
}

function loadProgress(){
    document.getElementById('wordsLearned').textContent=stats.wordsStudied.size;
    document.getElementById('totalExercises').textContent=stats.exercisesCompleted;
    const accuracy=stats.totalAnswers?Math.round((stats.correctAnswers/stats.totalAnswers)*100):0;
    document.getElementById('accuracy').textContent=accuracy+'%';
    const activityHTML=stats.activityLog.map(a=>`<div class="meaning-item">${a}</div>`).join('');
    document.getElementById('activityLog').innerHTML=activityHTML||'<p style="color:#666;">No recent activity</p>';
}

// Load initial data
loadVocabulary();
</script>
</body>
</html>
